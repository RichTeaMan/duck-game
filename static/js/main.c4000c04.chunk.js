(this["webpackJsonpduck-game"]=this["webpackJsonpduck-game"]||[]).push([[0],{1465:function(t,e,a){"use strict";a.r(e);var i=a(62),s=a.n(i),n=a(539),o=a.n(n),r=(a(545),a(546),a(264)),h=a(43),d=a(39),c=function(){function t(e,a,i,s){Object(h.a)(this,t),this.name=void 0,this.offset=void 0,this.x=void 0,this.y=void 0,this.opposite=void 0,this.name=e,this.offset=a,this.x=i,this.y=s}return Object(d.a)(t,null,[{key:"initialise",value:function(){t.west=new t("west",0,-2,0),t.northWest=new t("northWest",32,-2,-1),t.north=new t("north",64,0,-2),t.northEast=new t("northEast",96,2,-1),t.east=new t("east",128,2,0),t.southEast=new t("southEast",160,2,1),t.south=new t("south",192,0,2),t.southWest=new t("southWest",224,-2,1),t.west.opposite=t.east,t.northWest.opposite=t.southEast,t.north.opposite=t.south,t.northEast.opposite=t.southWest,t.east.opposite=t.west,t.southEast.opposite=t.northWest,t.south.opposite=t.north,t.southWest.opposite=t.northEast,t.map=[],t.map[t.west.name]=t.west,t.map[t.northWest.name]=t.northWest,t.map[t.north.name]=t.north,t.map[t.northEast.name]=t.northEast,t.map[t.east.name]=t.east,t.map[t.southEast.name]=t.southEast,t.map[t.south.name]=t.south,t.map[t.southWest.name]=t.southWest}},{key:"get",value:function(e){return t.map[e]}}]),t}();c.west=void 0,c.northWest=void 0,c.north=void 0,c.northEast=void 0,c.east=void 0,c.southEast=void 0,c.south=void 0,c.southWest=void 0,c.map=void 0,c.initialise();var u,m=a(160),l=a(159),p=a(158),f=a(161),g=function(){function t(e,a,i,s){Object(h.a)(this,t),this.image=void 0,this.isDestroyed=!1,this.image=e.scene.add.image(i,s,a)}return Object(d.a)(t,[{key:"update",value:function(){}},{key:"destroy",value:function(){this.isDestroyed=!0,this.image&&this.image.destroy()}},{key:"distanceFromEntity",value:function(t){return Phaser.Math.Distance.Between(this.x,this.y,t.x,t.y)}},{key:"x",get:function(){return this.image.x},set:function(t){this.image.x=t}},{key:"y",get:function(){return this.image.y},set:function(t){this.image.y=t}}]),t}();!function(t){t[t.Food=0]="Food",t[t.Duck=1]="Duck"}(u||(u={}));var y,v,w,k={idle:{startFrame:0,endFrame:4,speed:.2},walk:{startFrame:0,endFrame:4,speed:.1},feed:{startFrame:5,endFrame:7,speed:.8},die:{startFrame:20,endFrame:28,speed:.2},shoot:{startFrame:28,endFrame:32,speed:.1}},E=function(t){function e(t,a,i,s,n,o){var r,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"duck";return Object(h.a)(this,e),(r=Object(m.a)(this,Object(l.a)(e).call(this,t,d,a,i))).startX=void 0,r.startY=void 0,r.distance=void 0,r.motion=void 0,r.anim=void 0,r.direction=void 0,r.speed=void 0,r.f=void 0,r.target=null,r.gameState=void 0,r.animationStep=1,r.active=!0,r.startX=a,r.startY=i,r.distance=o,r.motion=s,r.anim=k[s],r.direction=n,r.speed=r.anim.speed,r.f=r.anim.startFrame,r.gameState=t,r.gameState.scene.time.delayedCall(1e3*r.anim.speed,r.changeFrame,[],Object(p.a)(r)),r}return Object(f.a)(e,t),Object(d.a)(e,[{key:"entityType",value:function(){return u.Duck}},{key:"startWalkAnimation",value:function(){this.f=k.walk.startFrame,this.anim=k.walk,this.animationStep=1,this.motion="walk",this.changeFrame(),this.active=!0}},{key:"startFeedAnimation",value:function(){this.f=k.feed.startFrame,this.anim=k.feed,this.animationStep=1,this.motion="feed",this.changeFrame(),this.active=!1}},{key:"changeFrame",value:function(){var t=this.anim.speed;if(this.image.depth=this.y+64,this.f>this.anim.endFrame||this.f<0)switch(this.motion){case"walk":this.animationStep=-this.animationStep,this.f+=2*this.animationStep;break;case"feed":return void this.gameState.scene.time.delayedCall(1e3*t,this.startWalkAnimation,[],this);case"idle":t=.5+Math.random(),this.gameState.scene.time.delayedCall(1e3*t,this.resetAnimation,[],this);break;case"die":t=6+6*Math.random(),this.gameState.scene.time.delayedCall(1e3*t,this.resetAnimation,[],this)}this.image.frame=this.image.texture.get(this.direction.offset+this.f),this.gameState.scene.time.delayedCall(1e3*t,this.changeFrame,[],this),this.f+=this.animationStep}},{key:"resetAnimation",value:function(){}},{key:"update",value:function(){var t=this;if(this.active){if(null==this.target&&this.gameState.fetchFood().length>0){var e=this.gameState.fetchFood().map((function(e){return{distance:t.distanceFromEntity(e)+(a=30,Math.floor(Math.random()*Math.floor(a))),target:e};var a})).sort((function(t){return t.distance})).reverse()[0];e.distance<250&&(this.target=e.target)}if(this.target){if(this.target.isDestroyed)return void(this.target=null);if(this.distanceFromEntity(this.target)<2.5)return this.target.destroy(),void this.startFeedAnimation();var a=this.target.x-this.x,i=this.target.y-this.y,s=Math.atan(Math.abs(a)/Math.abs(i)),n=Math.cos(s),o=Math.sin(s),r=n+o,h=a/r*.05,d=i/r*.05;a<0&&n>0&&(n=-n),i<0&&o>0&&(o=-o),this.x+=h,this.y+=d}else this.x+=this.direction.x*this.speed,0!==this.direction.y&&(this.y+=this.direction.y*this.speed,this.image.depth=this.y+64),Phaser.Math.Distance.Between(this.startX,this.startY,this.x,this.y)>=this.distance&&(this.direction=this.direction.opposite,this.image.frame=this.image.texture.get(this.direction.offset+this.f),this.startX=this.x,this.startY=this.y)}}}]),e}(g),b=function(t){function e(t,a,i,s){var n;return Object(h.a)(this,e),(n=Object(m.a)(this,Object(l.a)(e).call(this,t,a,i,s))).start=0,n.image.depth=s+32,n}return Object(f.a)(e,t),Object(d.a)(e,null,[{key:"createBread",value:function(t,a,i){var s=new e(t,"bread",a,i);return s.image.scale=.2,t.entities.push(s),s}}]),Object(d.a)(e,[{key:"entityType",value:function(){return u.Food}},{key:"update",value:function(){this.start++,this.start>200&&this.destroy()}}]),e}(g),F=function(){function t(e){Object(h.a)(this,t),this.scene=void 0,this.cursors=void 0,this.entities=[],this.scene=e,this.cursors=e.input.keyboard.createCursorKeys()}return Object(d.a)(t,[{key:"update",value:function(){this.entities.forEach((function(t){t.update()}))}},{key:"pruneEntities",value:function(){var t=[];this.entities.forEach((function(e){e.isDestroyed||t.push(e)})),this.entities=t}},{key:"fetchFood",value:function(){return this.entities.filter((function(t){return t.entityType()===u.Food}))}},{key:"addEntity",value:function(t){this.entities.push(t)}}]),t}(),W={title:"Sample",type:r.AUTO,parent:"game-container",width:1600,height:1200,scene:{preload:function(){this.load.json("pond-map","assets/pond.json"),this.load.image("water","assets/water.png"),this.load.spritesheet("duck","assets/duck-white-spritesheet.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("mallard","assets/duck-mallard-spritesheet.png",{frameWidth:128,frameHeight:128}),this.load.spritesheet("landscape-tileset","assets/landscape-spritesheet.png",{frameWidth:132,frameHeight:100}),this.load.image("bread","assets/bread_NW.png")},create:function(){w=new F(this),this.input.setDefaultCursor("url(assets/bread_cursor.png), pointer"),this.input.on("pointerdown",(function(t){var e=t.x+w.scene.cameras.main.scrollX,a=t.y+w.scene.cameras.main.scrollY+40;b.createBread(w,e,a)}),this),function(){var t=w.scene.cache.json.get("pond-map"),e=t.tilewidth,a=t.tileheight;y=e/2,v=a/2;for(var i=t.layers[0].data,s=t.layers[0].width,n=t.layers[0].height,o=s*y,r=0,h=0;h<n;h++)for(var d=0;d<s;d++){var c=i[r]-1,u=(d-h)*y,m=(d+h)*v,l=w.scene.add.image(o+u,16+m,"landscape-tileset",c);l.depth=16+m,console.log(l.depth),r++}}();w.addEntity(new E(w,1990,1090,"walk",c.get("southEast"),100)),w.addEntity(new E(w,1850,1180,"walk",c.get("southEast"),230)),w.addEntity(new E(w,2370,940,"walk",c.get("south"),380)),w.addEntity(new E(w,2210,980,"walk",c.get("south"),150)),w.addEntity(new E(w,2510,900,"walk",c.get("southEast"),670)),w.addEntity(new E(w,2550,940,"walk",c.get("northWest"),800,"mallard")),w.addEntity(new E(w,2500,1280,"walk",c.get("east"),200)),w.addEntity(new E(w,2780,1100,"walk",c.get("west"),100,"mallard")),w.addEntity(new E(w,2930,1140,"walk",c.get("northEast"),420)),w.addEntity(new E(w,2930,980,"walk",c.get("southEast"),160)),w.addEntity(new E(w,3200,1120,"walk",c.get("southWest"),320,"mallard")),w.addEntity(new E(w,3250,1140,"walk",c.get("southWest"),340)),w.addEntity(new E(w,3300,1160,"walk",c.get("southWest"),330,"mallard")),w.scene.cameras.main.setSize(1600,1200),w.scene.cameras.main.scrollX=1750,w.scene.cameras.main.scrollY=600,w.scene.cameras.main.zoom=.75},update:function(){w.update(),w.pruneEntities()}},backgroundColor:"#000000"};new r.Game(W);var j=function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{id:"game-container"})),"Learn ",s.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"React")," and ",s.a.createElement("a",{className:"App-link",href:"https://phaser.io/",target:"_blank",rel:"noopener noreferrer"},"Phaser"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},540:function(t,e,a){t.exports=a(1465)},545:function(t,e,a){},546:function(t,e,a){}},[[540,1,2]]]);
//# sourceMappingURL=main.c4000c04.chunk.js.map